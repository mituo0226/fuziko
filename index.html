<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>éœŠèƒ½è€… è—¤å­ã®æœªæ¥é‘‘å®š</title>
</head>
<body bgcolor="#2c003e" text="#ffffff">
  <center>
    <h2><font color="#ff4040">ğŸ”® éœŠèƒ½è€… è—¤å­ã®æœªæ¥äºˆçŸ¥ ğŸ”®</font></h2>
    <p><font color="#ffffff">åå‰ã¨ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒã‚ãªãŸã®é‹å‘½ã‚’éœŠè¦–ã—ã¾ã™ã€‚</font></p>
    <form id="fortuneForm">
      <p><input type="text" id="name" placeholder="ãŠåå‰" required></p>
      <p>
        <select id="year"></select>å¹´
        <select id="month"></select>æœˆ
        <select id="day"></select>æ—¥
      </p>
      <p><button type="submit">æœªæ¥ã‚’è¦–ã‚‹</button></p>
    </form>
    <div id="result" style="width:80%; margin-top:20px;"></div>
  </center>

<script>
  const yearSel = document.getElementById("year");
  const monthSel = document.getElementById("month");
  const daySel = document.getElementById("day");

  for (let y = 1950; y <= 2010; y++) {
    yearSel.innerHTML += `<option value="${y}">${y}</option>`;
  }
  for (let m = 1; m <= 12; m++) {
    monthSel.innerHTML += `<option value="${m}">${m}</option>`;
  }
  for (let d = 1; d <= 31; d++) {
    daySel.innerHTML += `<option value="${d}">${d}</option>`;
  }

  document.getElementById("fortuneForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const name = document.getElementById("name").value;
    const birthday = yearSel.value + "-" + monthSel.value.padStart(2, '0') + "-" + daySel.value.padStart(2, '0');

    const res = await fetch("/fortune", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, birthday })
    });

    const data = await res.json();
    document.getElementById("result").innerHTML = `<font color="#ff4040"><b>${name}æ®¿ã®é‘‘å®šçµæœ</b></font><br><br><font color="#ffffff">${data.result.replace(/\n/g, "<br>")}</font>`;
  });
</script>
</body>
</html>
